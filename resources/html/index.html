<html>

<head>
	<script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
	<script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v3.12.4/dist/aframe-extras.min.js"></script>
	<script src="https://unpkg.com/aframe-html-shader@0.2.0/dist/aframe-html-shader.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.5/socket.io.min.js"></script>
	<script src="https://unpkg.com/networked-aframe/dist/networked-aframe.min.js"></script>
	<script src="easyrtc/easyrtc.js"></script>
	<script src="https://mozilla.github.io/pdf.js/build/pdf.js"></script>

	<!-- self implemented content -->
	<script src="resources/js/pdf-loader.js"></script>
	<script src="resources/js/custom-components/event-sync.js"></script>
	<script src="resources/js/server-component.js"></script>
</head>

<body onload="pdfLoader().init(); ServerManager().init();">
	<a-scene networked-scene="
	room: default;
	debug: true;
	adapter: easyrtc;
	audio : true;
	serverURL: http://localhost:8080/;" inspector="url: https://aframe.io/releases/0.3.0/aframe-inspector.min.js">
		<!-- asset definitons -->
		<a-assets>
			<script id="avatar-template" type="text/html">
					<a-entity class="torso" gltf-model="url(resources/models/humans/m3_torso.glb);"networked-audio-source rotation="0 180 0" position="0 -2 0" scale="1.5 1.5 1.5">
					</a-entity>
				</script>
			<script id="avatar-head-template" type="text/html">
					<a-entity class="head" gltf-model="url(resources/models/humans/m3_head.glb);" rotation="0 180 0" scale="0.13 0.13 0.13">
					</a-entity>
			</script>
		</a-assets>

		<a-entity id="player" networked="template:#avatar-template;showLocalTemplate:false;" position="0 2 0" wasd-controls>
			<a-entity id="players-head" camera look-controls networked="template:#avatar-head-template;showLocalTemplate:false" position="0 0.39 0">
				<a-entity cursor="fuse: true; fuseTimeout: 500" position="0 0 -1" geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
				 material="color: black; shader: flat">
					<a-animation begin="click" easing="ease-in" attribute="scale" dur="150" fill="forwards" from="0.1 0.1 0.1" to="1 1 1"></a-animation>
					<a-animation begin="cursor-fusing" easing="ease-in" attribute="scale" dur="1500" fill="backwards" from="1 1 1" to="0.1 0.1 0.1"></a-animation>
				</a-entity>
			</a-entity>
		</a-entity>
		<a-entity gltf-model=" url(resources/models/apartment/scene.gltf);" position="0 0 0"></a-entity>
		<a-entity static-sync material="shader: html; target: #htmlElement;fps:2;" position="-8.1 4.64 -6.7" rotation="0 45.836623610465864 0"
		 scale="1 1 1" visible="true" id="WhiteBoard" mixin="null" geometry="height:4.56;width:8.74;primitive:plane"></a-entity>
		<a-entity event-sync position="-4.17 4.78 -7.69" rotation="0 45 0" scale="1 1 1" visible="true" id="pdf_next_page" material="color:#80ff00"
		 geometry="primitive:plane"></a-entity>
		<a-entity event-sync position="-8.92 4.78 -2.54" rotation="0 45 0" scale="1 1 1" visible="true" id="pdf_previus_page" material="color:#80ff00"
		 geometry="primitive:plane"></a-entity>
		<a-entity event-sync position="-4.35 0.76 3.19" rotation="270 3.1799999999999997 0" scale="0.5 0.5 1" visible="true" id="pdf1"
		 geometry="primitive:plane" material=""></a-entity>
		<a-entity event-sync position="-4.35 0.76 3.99" rotation="270 3.1799999999999997 0" scale="0.5 0.5 1" visible="true" id="pdf2"
		 geometry="primitive:plane" material=""></a-entity>
		<!-- Div for pdf rendering-->
		<div style="width: 1920px; height: 1080px; position: fixed; left: 0; top: 0; z-index: -1; overflow: hidden;   text-align: center ">
			<!-- this element is referenced by the html shader. All its content will be visible in scene -->
			<div id="htmlElement" style="background: rgba(198, 225, 240, 0.212); color: #333; font-size: 48px">
				<!-- this canves is used to render the pdf content -->
				<canvas id="the-canvas"></canvas>
			</div>
		</div>
	</a-scene>

</body>

</html>